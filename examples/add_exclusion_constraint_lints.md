# Eugene üîí lint report of `examples/add_exclusion_constraint.sql`

This is a human readable SQL script safety report generated by [eugene](https://github.com/kaaveland/eugene). Keep in mind that lints can be ignored by adding a `-- eugene: ignore E123` comment to the SQL statement or by passing --ignore E123 on the command line.

The migration script did not pass all the checks ‚ùå

## Statement number 1

### SQL

```sql
alter table books add constraint title_exclusion exclude(title with =)
```

### Lints

#### Creating a new exclusion constraint

ID: `E8`

Found a new exclusion constraint. This blocks all reads and writes to the table while the constraint index is being created. A safer way is: There is no safe way to add an exclusion constraint to an existing table.

Statement takes `AccessExclusiveLock` on `public.books`, blocking reads and writes until constraint `title_exclusion` is validated and has created index

#### Taking dangerous lock without timeout

ID: `E9`

A lock that would block many common operations was taken without a timeout. This can block all other operations on the table indefinitely if any other transaction holds a conflicting lock while `idle in transaction` or `active`. A safer way is: Run `SET LOCAL lock_timeout = '2s';` before the statement and retry the migration if necessary.

Statement takes lock on `public.books`, but does not set a lock timeout

